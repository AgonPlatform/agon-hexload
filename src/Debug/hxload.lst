Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED07-Jan-23     14:22:35     page:   1


PC     Object              I  Line    Source 
                           A     1    			.ASSUME	ADL = 1
                           A     2    			SEGMENT CODE
                           A     3    			
                           A     4    			XREF	_uart1_getch
                           A     5    			XDEF	_hxload
                           A     6    			
       00000004            A     7    LOAD_HLU_DEFAULT	.EQU	04h		; 0x040000 
                           A     8    
0403C7                     A     9    _hxload:
0403C7 D5                  A    10    			PUSH	DE
0403C8 E5                  A    11    			PUSH	HL
0403C9 C5                  A    12    			PUSH	BC
                           A    13    			
0403CA AF                  A    14    			XOR		A,A
0403CB 32 B0 0C 04         A    15    			LD		(hexload_error),A		; c
0403CF 3E04                A    16    			LD		A,LOAD_HLU_DEFAULT		; d
0403D1 32 B1 0C 04         A    17    			LD		(hexload_address+2),A	; i
0403D5                     A    18    hxline:
0403D5 CD B0 02 04         A    19    			CALL	_uart1_getch
0403D9 FE3A                A    20    			CP		':'
0403DB 20 F8               A    21    			JR		NZ, hxline				; i
0403DD 1E00                A    22    			LD		E,0						; r
0403DF CD 4B 04 04         A    23    			CALL	getbyte					; r
0403E3 57                  A    24    			LD		D,A
0403E4 CD 4B 04 04         A    25    			CALL	getbyte					; r
0403E8 67                  A    26    			LD		H,A
0403E9 CD 4B 04 04         A    27    			CALL	getbyte					; r
0403ED 6F                  A    28    			LD		L,A
0403EE CD 4B 04 04         A    29    			CALL	getbyte					; r
0403F2 FE00                A    30    			CP		0
0403F4 28 2F               A    31    			JR		Z, hexdata
0403F6 FE01                A    32    			CP		1
0403F8 28 49               A    33    			JR		Z, hexendfile
0403FA FE04                A    34    			CP		4
0403FC 28 02               A    35    			JR		Z, hex_address
0403FE 18 D5               A    36    			JR		hxline					; i
                           A    37    
040400                     A    38    hex_address:
040400 CD 4B 04 04         A    39    			CALL	getbyte					; l
040404 CD 4B 04 04         A    40    			CALL	getbyte					; l
040408 32 B1 0C 04         A    41    			LD		(hexload_address + 2),A	; s
04040C AF                  A    42    			XOR		A,A
04040D 32 B0 0C 04         A    43    			LD		(hexload_address + 1),A	; c
040411 32 AF 0C 04         A    44    			LD		(hexload_address),A
040415 21 AF 0C 04         A    45    			LD		HL, hexload_address
040419 ED27                A    46    			LD		HL,(HL)					; l
04041B CD 4B 04 04         A    47    			CALL	getbyte					; l
04041F 7B                  A    48    			LD		A,E
040420 B7                  A    49    			OR		A
040421 20 15               A    50    			JR		NZ, hexckerr			; c
040423 18 B0               A    51    			JR		hxline
040425                     A    52    hexdata:
040425 CD 4B 04 04         A    53    			CALL	getbyte
040429 77                  A    54    			LD		(HL),A
04042A 23                  A    55    			INC		HL
04042B 15                  A    56    			DEC		D
04042C 20 F7               A    57    			JR		NZ, hexdata
04042E CD 4B 04 04         A    58    			CALL	getbyte					; l
040432 7B                  A    59    			LD		A,E
040433 B7                  A    60    			OR		A						; s
040434 20 02               A    61    			JR		NZ, hexckerr			; c
040436 18 9D               A    62    			JR		hxline
040438                     A    63    hexckerr:
040438 3A B0 0C 04         A    64    			LD		A,(hexload_error)
04043C 3C                  A    65    			INC		A
04043D 32 B0 0C 04         A    66    			LD		(hexload_error),A		; i
040441 18 92               A    67    			JR		hxline
                           A    68    	
040443                     A    69    hexendfile:	
040443 3A B0 0C 04         A    70    			LD		A,(hexload_error)		; r
040447 C1                  A    71    			POP		BC
040448 E1                  A    72    			POP		HL
040449 D1                  A    73    			POP		DE
04044A C9                  A    74    			RET
                           A    75    
04044B                     A    76    getbyte:
04044B CD 5E 04 04         A    77    			CALL	getnibble
04044F 07                  A    78    			RLCA
040450 07                  A    79    			RLCA
040451 07                  A    80    			RLCA
040452 07                  A    81    			RLCA
040453 47                  A    82    			LD		B,A
040454 CD 5E 04 04         A    83    			CALL	getnibble
040458 B0                  A    84    			OR		B						; c
040459 47                  A    85    			LD		B,A						; s
04045A 83                  A    86    			ADD		A,E						; a
04045B 5F                  A    87    			LD		E,A						; s
04045C 78                  A    88    			LD		A,B
04045D C9                  A    89    			RET
                           A    90    
04045E                     A    91    getnibble:
04045E CD B0 02 04         A    92    			CALL	_uart1_getch
040462 D630                A    93    			SUB		'0'
040464 FE0A                A    94    			CP		10
040466 D8                  A    95    			RET		C						; A
040467 D607                A    96    			SUB		7						; s
040469 FE10                A    97    			CP		16
04046B D8                  A    98    			RET		C						; A
04046C E6DF                A    99    			AND		11011111b				; t
04046E C9                  A   100    			RET								; l
                           A   101    			
                           A   102    	
                           A   103    			SEGMENT DATA
040CAF 03                  A   104    hexload_address		DEFB	3	; 24bit address
040CB0 01                  A   105    hexload_error		DEFB	1	; error counter


Errors: 0
Warnings: 0
Lines Assembled: 106
